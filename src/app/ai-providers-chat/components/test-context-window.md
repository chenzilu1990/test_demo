# 上下文窗口聚光灯效果测试说明

## 功能验证清单

### 1. 基础显示测试
- [ ] 页面加载正常，没有报错
- [ ] 上下文指示器在有对话时正常显示
- [ ] 消息列表正常渲染

### 2. 聚光灯效果测试
要验证聚光灯效果，建议以下步骤：

1. **选择一个较小上下文的模型**（如果有4K限制的模型）
2. **发送多条长消息**，让总token数接近上下文限制
3. **观察视觉效果**：
   - 当前上下文内的消息：完全不透明，颜色正常
   - 即将移出的消息：开始变淡，状态指示器变黄色
   - 已移出的消息：高透明度，状态指示器变灰色，显示"历史"标签

### 3. 上下文指示器测试
- [ ] 进度条颜色随使用率变化（绿色→黄色→红色）
- [ ] Token计数显示正确（如"1.2K / 4K"）
- [ ] 使用率百分比显示正确
- [ ] 85%以上时显示建议提示
- [ ] 95%以上时显示"新对话"按钮

### 4. 交互功能测试
- [ ] "智能清理"按钮点击后保留最近3条消息
- [ ] "新对话"按钮点击后创建新对话
- [ ] 消息的状态指示器颜色正确：
  - 绿色：活跃消息
  - 黄色：淡出中的消息  
  - 灰色：历史消息

### 5. 响应式测试
- [ ] 不同屏幕尺寸下显示正常
- [ ] 手机端隐藏部分详细信息但核心功能可用

## 预期效果描述

**聚光灯效果**应该像这样：
- 新消息就像被聚光灯照亮，完全清晰
- 随着对话进行，早期消息逐渐"淡出聚光灯范围"
- 最老的消息变成"历史记录"，几乎透明

**上下文指示器**应该：
- 实时显示当前对话的token使用情况  
- 提供直观的视觉反馈（进度条+颜色）
- 在合适的时机提供操作建议

这个设计让用户一眼就能看出：
1. 哪些消息AI"还记得"（在上下文内）
2. 哪些消息快要"忘记"了（淡出中）
3. 哪些消息已经"忘记"了（历史消息）