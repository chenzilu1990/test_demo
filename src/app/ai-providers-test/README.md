# AI Providers 测试工具

这是一个专门用于测试 `ai-providers` 模块各项功能的综合测试页面。

## 功能特性

### 🔧 配置管理
- **提供商状态监控**: 实时显示所有AI提供商的连接状态
- **配置同步**: 自动从主配置页面同步API密钥和设置
- **快速连接测试**: 一键测试单个提供商的连接状态

### 🧪 测试功能

#### 1. 连接测试
- 验证API密钥的有效性
- 测试网络连接和服务可用性
- 检查模型访问权限
- 提供详细的错误诊断信息

#### 2. 聊天功能测试
- 测试标准的聊天API调用
- 验证请求和响应格式
- 检查模型响应质量
- 记录响应时间和token使用情况

#### 3. 流式输出测试
- 测试实时流式响应
- 验证流式数据的完整性
- 监控流式传输性能
- 实时显示生成内容

#### 4. 验证功能测试
- **API密钥格式验证**: 检查不同提供商的密钥格式
- **URL格式验证**: 验证API端点URL的有效性
- **请求参数验证**: 测试参数范围和类型检查

#### 5. 错误处理测试
- 测试各种错误场景的处理
- 验证错误消息的准确性
- 检查错误代码的正确性
- 测试重试机制

### 📊 结果分析

#### 测试结果统计
- **总测试数**: 显示执行的测试总数
- **成功率**: 计算测试成功的百分比
- **失败率**: 统计失败测试的数量
- **平均耗时**: 计算所有测试的平均响应时间

#### 详细结果展示
- **测试类型标识**: 清晰标识每个测试的类型
- **时间戳**: 记录每个测试的执行时间
- **详细信息**: 可展开查看完整的请求和响应数据
- **错误详情**: 提供详细的错误信息和调试数据

### 📈 数据导出
- **JSON格式导出**: 导出完整的测试结果数据
- **包含元数据**: 导出时间、提供商配置等信息
- **便于分析**: 导出的数据可用于进一步分析和报告

## 使用指南

### 1. 配置准备
在使用测试工具之前，请确保：
1. 已在主配置页面配置了至少一个AI提供商
2. API密钥已正确填写并启用
3. 网络连接正常

### 2. 基本测试流程

#### 快速开始
1. 点击 **"运行所有测试"** 按钮
2. 系统将自动执行所有类型的测试
3. 在 **"结果"** 标签页查看测试结果

#### 单项测试
1. 在 **"测试"** 标签页选择提供商和模型
2. 输入测试消息（可选）
3. 点击相应的测试按钮：
   - **测试聊天**: 测试标准聊天功能
   - **测试流式输出**: 测试实时流式响应
   - **测试验证**: 测试输入验证功能
   - **测试错误处理**: 测试错误处理机制

### 3. 结果解读

#### 状态指示器
- 🟢 **绿色**: 测试成功
- 🔴 **红色**: 测试失败
- 🟡 **黄色**: 测试中或警告
- ⚪ **灰色**: 未配置或未测试

#### 测试类型说明
- **CONNECTION**: 连接测试
- **CHAT**: 聊天功能测试
- **STREAM**: 流式输出测试
- **VALIDATION**: 验证功能测试
- **ERROR**: 错误处理测试

### 4. 故障排除

#### 常见问题
1. **API密钥无效**
   - 检查密钥格式是否正确
   - 确认密钥是否已激活
   - 验证账户余额是否充足

2. **网络连接失败**
   - 检查网络连接
   - 确认防火墙设置
   - 尝试使用代理

3. **模型不可用**
   - 确认模型名称正确
   - 检查模型访问权限
   - 验证账户订阅状态

#### 调试技巧
1. 查看浏览器控制台的详细日志
2. 使用 **"查看详情"** 展开错误信息
3. 导出测试结果进行离线分析
4. 对比不同提供商的测试结果

## 技术特性

### 性能监控
- 自动记录每个请求的响应时间
- 统计token使用情况
- 监控成功率和错误率

### 错误处理
- 统一的错误分类和处理
- 详细的错误消息和建议
- 自动重试机制测试

### 数据持久化
- 测试结果本地存储
- 配置信息同步
- 历史数据保留

## 最佳实践

1. **定期测试**: 建议定期运行测试以确保服务稳定性
2. **多场景测试**: 使用不同的消息内容测试各种场景
3. **性能基准**: 建立性能基准线，监控服务质量变化
4. **错误分析**: 定期分析错误模式，优化配置
5. **结果归档**: 定期导出和归档测试结果

## 注意事项

- 测试会消耗实际的API配额，请注意使用量
- 某些测试可能需要较长时间，请耐心等待
- 网络状况可能影响测试结果的准确性
- 建议在稳定的网络环境下进行测试

## 支持的提供商

当前支持以下AI服务提供商的测试：
- OpenAI (GPT系列)
- Anthropic (Claude系列)
- Google Gemini
- Ollama (本地部署)
- SiliconFlow
- AiHubMix (聚合服务)

每个提供商都有专门的测试逻辑和错误处理机制。 